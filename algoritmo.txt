// servidor.c
typedef struct dogType_s {} dogType;
typedef struct tabla_s {} tabla;
main {};
while {
	crea el servidor
	loop {
		recibir mensaje
		si es un nuevo cliente y hay menos que 32 clientes:
			 anadirlo a una tabla de 32;
			 enviar mensaje al cliente;
		sino si es un nuevo cliente:
			 enviar mensaje de error al cliente;
		sino:
			// ? semaforo : tenemos menos que 32 clientes
			join hilo x
			create hilo x(cliente, IP, funcion)
	}
}
hilo {
	r = funcion que necesita
	log = "fecha cliente IP funcion r"
	open semaforo(log)
	escribir(log)
	close semaforo(log)
}

ingresar {
	recibir dogType
	open semaforo
	new hash, ...
	close semaforo
	enviar clave
}
ver {
	recibir clave
	si existe {
		enviar(SUCCESS)
		open semaforo(dogtypes)
		leer dog(clave)
		close semaforo(dogtypes)
		enviar(dog(clave))
		recibir(archivo?)
		si archivo {
			open semaforo(dogtypes)
			leer(archivo)
			enviar(archivo)
			recibir(cambio?)
			si cambio {
				recibir(archivo)
				escribir(archivo)
			}
			close semaforo(dogtypes)
		}
	}
	sino {
		enviar(FAILURE)
	}
}
borrar {
recibir clave
	si existe {
		enviar(SUCCESS)
		open semaforo(dogtypes)
		borrar(clave)
		close semaforo(dogtypes)
	sino {
		enviar(FAILURE)
	}
}
buscar {
	recibir(string)
	open semaforo(dogtypes)
	buscar(string)
	close semaforo(dogtypes)
	enviar(numeroDeDatos) // ej: 16
	loop:
		enviar(Datos) // ej: (Mario, 1), (Mario, 3), (Mario, 16), ...
		recibir(cuantosdatos?)
	
}


escribir/enviar/recibir {
	r = 0;
	while(r < numeroDeDatos){
		r += escribir/enviar/recibir
	}
}



// cliente.c
typedef struct dogType_s {} dogType;
termios

menu {}

ingresar {
	scanf()...
	dogType newDog = datos
	enviar(newDog)
	recibir(clave)
}
ver {
	scanf(clave)
	enviar(clave)
	recibir(existe?)
	si existe {
		recibir(dogType)
		print(dog)
		scanf(archivo?)
		si archivo {
			enviar(SI)
			recibir(archivo)
			leer la ultima fecha de modificacion -> fecha1
			abrir(archivo)
			leer la ultima fecha de modificacion -> fecha2
			enviar(fecha1 == fecha2)
			if fecha1 != fecha2 {
				enviar(archivo)
			}
		}
		sino {
			enviar(NO)
		}
	}
}
borrar {
	scanf(clave)
	enviar(clave)
	recibir(existe?)
	print(si existe)
}
buscar {
	scanf(string)
	enviar(string)
	recibir(numeroDeDatos)
	loop:
		recibir(Datos)
		enviar(cuantosdatos)
	print como en p1 
}

salir {
exit(exit code)
}

